
set(fingerprints_srcs
    fingerprints/finger2.cpp
    fingerprints/finger3.cpp
)

set(forcefields_srcs
    forcefields/forcefieldghemical.cpp
    forcefields/forcefieldmmff94.cpp
    forcefields/forcefielduff.cpp
)

set(math_srcs
    math/matrix3x3.cpp
    math/spacegroup.cpp
    math/transform3d.cpp
    math/vector3.cpp
)

set(openbabel_srcs
    atom.cpp
    base.cpp
    bitvec.cpp
    bond.cpp
    bondtyper.cpp
    canon.cpp
    chains.cpp
    chiral.cpp
    data.cpp
    descriptor.cpp
    fingerprint.cpp
    forcefield.cpp
    format.cpp
    generic.cpp
    grid.cpp
    kekulize.cpp
    matrix.cpp
    mol.cpp
    molchrg.cpp
    obconversion.cpp
    oberror.cpp
    obiter.cpp
    obutil.cpp
    parsmart.cpp
    patty.cpp
    phmodel.cpp
    plugin.cpp
    rand.cpp
    residue.cpp
    ring.cpp
    rotor.cpp
    rotamer.cpp
    tokenst.cpp
    typer.cpp
    transform.cpp
    groupcontrib.cpp
    formats/obmolecformat.cpp
)

if(BUILD_SHARED)
  if(WIN32)
    set(openbabel_srcs ${openbabel_srcs}
        dlhandler_win32.cpp
        )
  else(WIN32)
    set(openbabel_srcs ${openbabel_srcs}
        dlhandler_unix.cpp
        )
  endif(WIN32)
endif(BUILD_SHARED)

add_library(${BABEL_LIBRARY} ${BUILD_TYPE}
                ${openbabel_srcs}
                ${fingerprints_srcs}
                ${forcefields_srcs}
                ${math_srcs}
                ${headers}
                ${CMAKE_BINARY_DIR}/include/openbabel/babelconfig.h
)

if(NOT WIN32)
  set(libs ${libs} m)
endif(NOT WIN32)

target_link_libraries(${BABEL_LIBRARY} ${libs} ${LIBXML2_LIBRARIES} ${ZLIB_LIBRARY})
set_target_properties(${BABEL_LIBRARY} PROPERTIES
                                       VERSION ${BABEL_VERSION}
                                       SOVERSION ${BABEL_MAJ_VER}
                                       DEFINE_SYMBOL MAKE_OBDLL
                      )
install(TARGETS ${BABEL_LIBRARY}
                RUNTIME DESTINATION bin
                LIBRARY DESTINATION ${LIB}
                ARCHIVE DESTINATION ${LIB}
)

add_subdirectory(formats)
